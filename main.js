!function(){"use strict";const e=".popup__form",t=".profile__info";class s{constructor(e,s){let{data:r,handleCardImageClick:i,handleCardDeleteClick:n,handleCardLikeClick:a}=e;this._data=r,this._userId=document.querySelector(t).id,this._templateSelector=s,this._handleCardImageClick=i,this._handleCardDeleteClick=n,this._handleCardLikeClick=a}createCard(){return this._card=this._getElement(),this._cardName=this._card.querySelector(".card__name"),this._cardImage=this._card.querySelector(".card__image"),this._cardLikeButton=this._card.querySelector(".card__like-button"),this._cardLikeCount=this._card.querySelector(".card__like-count"),this._cardDeleteButton=this._card.querySelector(".card__delete-button"),this._cardName.textContent=this._data.name,this._cardImage.src=this._data.link,this._cardImage.alt=this._data.name,this._card.id=this._data._id,this._cardLikeCount.textContent=this._getLikeCount(this._data),this._findLikeStatus(),this._authenticateCardDelete(),this._setEventListeners(),this._card}_getElement(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_findLikeStatus(){this._isLiked=this._getLikedUserIds().includes(this._userId),this._isLiked&&this._toggleCardLikeButton()}_listenCardLikeButtonClick(){this._cardLikeButton.addEventListener("click",(()=>{this._handleCardLikeClick(this._data._id,this._isLiked)}))}updateCardLike(e){this._updateLikeCount(e),this._toggleCardLikeButton(),this._isLiked=!this._isLiked}_toggleCardLikeButton(){this._cardLikeButton.classList.toggle("card__like-button_clicked")}_getLikeCount(e){return e.likes.length.toString()}_updateLikeCount(e){this._cardLikeCount.textContent=this._getLikeCount(e)}_getLikedUserIds(){return this._data.likes.map((e=>e._id))}_authenticateCardDelete(){this._userId==this._data.owner._id&&this._showCardDeleteButton()}_showCardDeleteButton(){this._cardDeleteButton.classList.add("card__delete-button_visible")}_listenCardDeleteButtonClick(){this._cardDeleteButton.addEventListener("click",(()=>{this._handleCardDeleteClick({cardId:this._data._id})}))}_listenCardImageClick(){this._cardImage.addEventListener("click",(()=>{this._handleCardImageClick(this._data)}))}_listenCardImageError(){this._cardImage.addEventListener("error",(()=>this._handleCardImageError("https://placehold.co/400x400?text=Around+The+U.S.")))}_handleCardImageError(e){this._data.link=e,this._cardImage.src=e}_setEventListeners(){this._listenCardLikeButtonClick(),this._listenCardDeleteButtonClick(),this._listenCardImageClick(),this._listenCardImageError()}}class r{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}}class i{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._selector=e,this._element=document.querySelector(this._selector)}open(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._element.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()})),this._element.addEventListener("click",(e=>{e.target.classList.contains("popup__close-button")&&this.close()}))}}class n extends i{constructor(t,s){let{handleSubmit:r}=s;super(t),this._handleSubmit=r,this._form=this._element.querySelector(e),this._submitButton=this._element.querySelector(".popup__submit-button"),this._submitButtonInitialText=this._submitButton.textContent,this._inputList=this._element.querySelectorAll(".popup__input")}close(){super.close(),this._form.reset()}getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonInitialText}setEventListeners(){super.setEventListeners(),this._element.addEventListener("submit",this._handleSubmit)}}const a=document.querySelector(".profile__edit-button"),o=document.querySelector(".profile__add-button"),d=document.querySelector(".profile__avatar-wrapper"),l={},h=new Headers({authorization:"a397cd37-5ffd-4cc9-a80f-9599578123c3","Content-Type":"application/json"}),u=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.ok?e.json():Promise.reject(e.status)}_request(e,t){return fetch(e,t).then(this._handleServerResponse)}handleError(e){console.error(`Error caught in fetch API: ${e}`)}_getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}_getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getAppInfo(){return Promise.all([this._getUserInfo(),this._getInitialCards()])}editUserInfo(e){let{name:t,about:s}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})})}addNewCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return this._request(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers})}deleteLike(e){return this._request(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers})}editUserAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:h}),_=new class{constructor(){this._userName=document.querySelector(".profile__name"),this._userAbout=document.querySelector(".profile__about"),this._userAvatar=document.querySelector(".profile__avatar"),this._userInfo=document.querySelector(t)}getUserInfo(){return{name:this._userName.textContent,about:this._userAbout.textContent}}renderUserInfo(e){let{name:t,about:s,avatar:r,_id:i}=e;this._userName.textContent=t,this._userAbout.textContent=s,this._userAvatar.src=r,this._userInfo.id=i}},c=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._element=document.querySelector(t)}renderItems(e){e.reverse().forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._element.prepend(t)}}({renderer:function(e){const t=new s({data:e,handleCardImageClick:e=>{m.open(e)},handleCardDeleteClick:e=>{g.setInputValues(e),g.open()},handleCardLikeClick:(e,s)=>{s?u.deleteLike(e).then((e=>{t.updateCardLike(e)})).catch(u.handleError):u.addLike(e).then((e=>{t.updateCardLike(e)})).catch(u.handleError)}},"#card-template");return t.createCard()}},".cards"),m=new class extends i{constructor(e){super(e),this._image=this._element.querySelector(".popup__image"),this._subtitle=this._element.querySelector(".popup__subtitle")}open(e){this._image.src=e.link,this._image.alt=`Image ${e.name}`,this._subtitle.textContent=e.name,super.open()}}(".popup_type_image"),p=new n(".popup_type_avatar",{handleSubmit:e=>{e.preventDefault(),p.renderLoading(!0);const t=p.getInputValues();u.editUserAvatar(t).then((e=>{_.renderUserInfo(e),p.close()})).catch(u.handleError).finally((()=>{p.renderLoading(!1)}))}}),C=new n(".popup_type_edit",{handleSubmit:e=>{e.preventDefault(),C.renderLoading(!0);const{name:t,about:s}=C.getInputValues();u.editUserInfo({name:t,about:s}).then((e=>{_.renderUserInfo(e),C.close()})).catch(u.handleError).finally((()=>{C.renderLoading(!1)}))}}),g=new n(".popup_type_delete",{handleSubmit:e=>{e.preventDefault();const{cardId:t}=g.getInputValues(),s=document.getElementById(t);u.deleteCard(t).then((()=>{s.remove(),g.close()})).catch(u.handleError)}}),L=new n(".popup_type_add",{handleSubmit:e=>{e.preventDefault(),L.renderLoading(!0,"Creating...");const{name:t,link:s}=L.getInputValues();u.addNewCard({name:t,link:s}).then((e=>{c.addItem(e),L.close()})).catch(u.handleError).finally((()=>{L.renderLoading(!1)}))}});var k;u.getAppInfo().then((e=>{let[t,s]=e;_.renderUserInfo(t),c.renderItems(s)})).catch(u.handleError),m.setEventListeners(),p.setEventListeners(),C.setEventListeners(),L.setEventListeners(),g.setEventListeners(),k={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_error",errorClass:"popup__input-error-text_active"},Array.from(document.querySelectorAll(e)).forEach((e=>{const t=new r(k,e),s=e.getAttribute("name");l[s]=t,t.enableValidation()})),d.addEventListener("click",(()=>{l["avatar-form"].resetValidation(),p.open()})),a.addEventListener("click",(()=>{l["profile-form"].resetValidation(),function(){const e=_.getUserInfo();C.setInputValues(e)}(),C.open()})),o.addEventListener("click",(()=>{l["card-form"].resetValidation(),L.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTyxJQUVyQjRGLE1BQU01RCxFQUFJaUIsYUFDVmlELFNBQVEsS0FDUEksRUFBYWhGLGVBQWMsRUFBTSxHQUNqQyxJQWxIc0JrRixNQXVIOUJ4RSxFQUNHdUIsYUFDQVAsTUFBSyxJQUEyQixJQUF6QmlELEVBQVVRLEdBQVUsRUFDMUJwQyxFQUFLTSxlQUFlc0IsR0FDcEJyQixFQUFZSSxZQUFZeUIsRUFBVSxJQUVuQ2IsTUFBTTVELEVBQUlpQixhQUVid0MsRUFBaUJuRixvQkFDakJ5RixFQUFnQnpGLG9CQUNoQjZGLEVBQWlCN0Ysb0JBQ2pCZ0csRUFBYWhHLG9CQUNib0YsRUFBZ0JwRixvQkFuSWNrRyxFTDFFRixDQUMxQnJJLGNBQWUsZ0JBQ2ZFLHFCQUFzQix3QkFDdEJTLG9CQUFxQixnQ0FDckJZLGdCQUFpQixxQkFDakJDLFdBQVksa0NLc0VLM0IsTUFBTUMsS0FBSzFELFNBQVMyRCxpQkFBaUJ0RSxJQUM3QzRFLFNBQVNaLElBQ2hCLE1BQU04SSxFQUFZLElBQUloSixFQUFjOEksRUFBYzVJLEdBRTVDK0ksRUFBVy9JLEVBQVlnSixhQUFhLFFBRzFDaEYsRUFBZStFLEdBQVlELEVBQzNCQSxFQUFVcEksa0JBQWtCLElBZ0loQ3FELEVBQWtCcEYsaUJBQWlCLFNBQVMsS0FDMUNxRixFTGpMZ0IsZUtpTHlCakQsa0JBQ3pDb0gsRUFBZ0I1RixNQUFNLElBR3hCc0IsRUFBa0JsRixpQkFBaUIsU0FBUyxLQUMxQ3FGLEVMckxpQixnQktxTHlCakQsa0JBbE01QyxXQUNFLE1BQU1rSSxFQUFXeEMsRUFBS0ssY0FDdEJ5QixFQUFpQjlFLGVBQWV3RixFQUNsQyxDQWdNRUMsR0FDQVgsRUFBaUJoRyxNQUFNLElBR3pCdUIsRUFBY25GLGlCQUFpQixTQUFTLEtBQ3RDcUYsRUwxTGMsYUswTHlCakQsa0JBQ3ZDMkgsRUFBYW5HLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZXR0aW5ncyBmb3IgZm9ybSB2YWxpZGF0aW9uXHJcbmV4cG9ydCBjb25zdCBmb3JtU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvci10ZXh0X2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuLy8gU2VsZWN0b3JzXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZHNDb250YWluZXI6IFwiLmNhcmRzXCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgY2FyZDogXCIuY2FyZFwiLFxyXG4gIGNhcmROYW1lOiBcIi5jYXJkX19uYW1lXCIsXHJcbiAgY2FyZEltYWdlOiBcIi5jYXJkX19pbWFnZVwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uOiBcIi5jYXJkX19saWtlLWJ1dHRvblwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uQWN0aXZlQ2xhc3M6IFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiLFxyXG4gIGNhcmRMaWtlQ291bnQ6IFwiLmNhcmRfX2xpa2UtY291bnRcIixcclxuICBjYXJkRGVsZXRlQnV0dG9uOiBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIsXHJcbiAgY2FyZERlbGV0ZUJ1dHRvblZpc2libGVDbGFzczogXCJjYXJkX19kZWxldGUtYnV0dG9uX3Zpc2libGVcIixcclxuICBwb3B1cEltYWdlOiBcIi5wb3B1cF90eXBlX2ltYWdlXCIsXHJcbiAgZWRpdEF2YXRhclBvcHVwOiBcIi5wb3B1cF90eXBlX2F2YXRhclwiLFxyXG4gIGVkaXRQcm9maWxlUG9wdXA6IFwiLnBvcHVwX3R5cGVfZWRpdFwiLFxyXG4gIGFkZENhcmRQb3B1cDogXCIucG9wdXBfdHlwZV9hZGRcIixcclxuICBkZWxldGVDYXJkUG9wdXA6IFwiLnBvcHVwX3R5cGVfZGVsZXRlXCIsXHJcbiAgcG9wdXBGb3JtOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIHBvcHVwSW5wdXQ6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvbjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHVzZXJBYm91dDogXCIucHJvZmlsZV9fYWJvdXRcIixcclxuICB1c2VyQXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxuICB1c2VySW5mbzogXCIucHJvZmlsZV9faW5mb1wiLFxyXG4gIGVkaXRBdmF0YXJPdmVybGF5OiBcIi5wcm9maWxlX19hdmF0YXItd3JhcHBlclwiLFxyXG4gIGVkaXRCdXR0b246IFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIsXHJcbiAgYWRkQnV0dG9uOiBcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIsXHJcbiAgYXZhdGFyRm9ybU5hbWU6IFwiYXZhdGFyLWZvcm1cIixcclxuICBwcm9maWxlRm9ybU5hbWU6IFwicHJvZmlsZS1mb3JtXCIsXHJcbiAgY2FyZEZvcm1OYW1lOiBcImNhcmQtZm9ybVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlQ2FyZEltYWdlQ2xpY2ssIGhhbmRsZUNhcmREZWxldGVDbGljaywgaGFuZGxlQ2FyZExpa2VDbGljayB9LFxyXG4gICAgdGVtcGxhdGVTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl91c2VySWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy51c2VySW5mbykuaWQ7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrID0gaGFuZGxlQ2FyZEltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2sgPSBoYW5kbGVDYXJkRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUNsaWNrID0gaGFuZGxlQ2FyZExpa2VDbGljaztcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xyXG5cclxuICAgIHRoaXMuX2NhcmROYW1lID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkTmFtZSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmNhcmRJbWFnZSk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZExpa2VCdXR0b24pO1xyXG4gICAgdGhpcy5fY2FyZExpa2VDb3VudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZExpa2VDb3VudCk7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZERlbGV0ZUJ1dHRvblxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZC5pZCA9IHRoaXMuX2RhdGEuX2lkO1xyXG5cclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9nZXRMaWtlQ291bnQodGhpcy5fZGF0YSk7XHJcbiAgICB0aGlzLl9maW5kTGlrZVN0YXR1cygpO1xyXG4gICAgdGhpcy5fYXV0aGVudGljYXRlQ2FyZERlbGV0ZSgpO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2ZpbmRMaWtlU3RhdHVzKCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IHRoaXMuX2dldExpa2VkVXNlcklkcygpLmluY2x1ZGVzKHRoaXMuX3VzZXJJZCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fdG9nZ2xlQ2FyZExpa2VCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2VDbGljayh0aGlzLl9kYXRhLl9pZCwgdGhpcy5faXNMaWtlZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUNhcmRMaWtlKGRhdGEpIHtcclxuICAgIHRoaXMuX3VwZGF0ZUxpa2VDb3VudChkYXRhKTtcclxuICAgIHRoaXMuX3RvZ2dsZUNhcmRMaWtlQnV0dG9uKCk7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gIXRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQ2FyZExpa2VCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKHNlbGVjdG9ycy5jYXJkTGlrZUJ1dHRvbkFjdGl2ZUNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9nZXRMaWtlQ291bnQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGRhdGEubGlrZXMubGVuZ3RoLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlTGlrZUNvdW50KGRhdGEpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9nZXRMaWtlQ291bnQoZGF0YSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0TGlrZWRVc2VySWRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGEubGlrZXMubWFwKChsaWtlKSA9PiBsaWtlLl9pZCk7XHJcbiAgfVxyXG5cclxuICBfYXV0aGVudGljYXRlQ2FyZERlbGV0ZSgpIHtcclxuICAgIGlmICh0aGlzLl91c2VySWQgPT0gdGhpcy5fZGF0YS5vd25lci5faWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0NhcmREZWxldGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93Q2FyZERlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcclxuICAgICAgc2VsZWN0b3JzLmNhcmREZWxldGVCdXR0b25WaXNpYmxlQ2xhc3NcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfbGlzdGVuQ2FyZERlbGV0ZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2soeyBjYXJkSWQ6IHRoaXMuX2RhdGEuX2lkIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfbGlzdGVuQ2FyZEltYWdlQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZEltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9saXN0ZW5DYXJkSW1hZ2VFcnJvcigpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZEltYWdlRXJyb3IoXHJcbiAgICAgICAgXCJodHRwczovL3BsYWNlaG9sZC5jby80MDB4NDAwP3RleHQ9QXJvdW5kK1RoZStVLlMuXCJcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDYXJkSW1hZ2VFcnJvcihwbGFjZWhvbGRlclBhdGgpIHtcclxuICAgIHRoaXMuX2RhdGEubGluayA9IHBsYWNlaG9sZGVyUGF0aDtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBwbGFjZWhvbGRlclBhdGg7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrKCk7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkRGVsZXRlQnV0dG9uQ2xpY2soKTtcclxuICAgIHRoaXMuX2xpc3RlbkNhcmRJbWFnZUNsaWNrKCk7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkSW1hZ2VFcnJvcigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIC8vIEFycm93IG1ldGhvZFxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIE92ZXJsYXkgQ2xvc2VcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xvc2UgQnV0dG9uXHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZS1idXR0b25cIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRm9ybSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvbik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25Jbml0aWFsVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMucG9wdXBJbnB1dCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vY29sbGVjdHMgZGF0YSBmcm9tIGFsbCB0aGUgaW5wdXQgZmllbGRzIGFuZCByZXR1cm5zIHRoYXQgZGF0YSBhcyBhbiBvYmplY3QuXHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vIEluc2VydCB0aGUgYHZhbHVlYCBieSB0aGUgYG5hbWVgIG9mIHRoZSBpbnB1dFxyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25Jbml0aWFsVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAvLyBTdWJtaXRcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBJbXBvcnQgQ1NTIGZvciBXZWJwYWNrXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vLyBJbXBvcnQgY2xhc3NzZXMgYW5kIGNvbnN0YW50c1xyXG5pbXBvcnQgeyBzZWxlY3RvcnMsIGZvcm1TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcblxyXG4vLyBWYXJpYWJsZSBEZWNsYXJhdGlvbnNcclxuY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5lZGl0QnV0dG9uKTtcclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmFkZEJ1dHRvbik7XHJcbmNvbnN0IGVkaXRBdmF0YXJPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZWRpdEF2YXRhck92ZXJsYXkpO1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuLy8gRnVuY3Rpb24gRGVjbGFyYXRpb25zXHJcblxyXG4vKipcclxuICogRmlsbHMgcHJvZmlsZSBmb3JtIHdpdGggY3VycmVudCBwcm9maWxlIGluZm9cclxuICovXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcclxuICBjb25zdCB1c2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJJbmZvKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgY2FyZCBlbGVtZW50IHdpdGggZ2l2ZW4gZGF0YSAobmFtZSBhbmQgaW1hZ2UgbGluaylcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGRhdGFcclxuICogQHJldHVybnMge29iamVjdH0gY2FyZEVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlQ2FyZEltYWdlQ2xpY2s6IChpbWFnZURhdGEpID0+IHtcclxuICAgICAgICBjYXJkUHJldmlld1BvcHVwLm9wZW4oaW1hZ2VEYXRhKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlQ2FyZERlbGV0ZUNsaWNrOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldElucHV0VmFsdWVzKGNhcmRJZCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlQ2FyZExpa2VDbGljazogKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xyXG4gICAgICAgIGlzTGlrZWRcclxuICAgICAgICAgID8gYXBpXHJcbiAgICAgICAgICAgICAgLmRlbGV0ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUNhcmRMaWtlKGRhdGEpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGFwaS5oYW5kbGVFcnJvcilcclxuICAgICAgICAgIDogYXBpXHJcbiAgICAgICAgICAgICAgLmFkZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUNhcmRMaWtlKGRhdGEpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGFwaS5oYW5kbGVFcnJvcik7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGVDYXJkKCk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVuYWJsZXMgZm9ybSB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXMgYW5kIG1ha2VzIGl0IGFjY2VzaWJsZSBieSAnbmFtZSdcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGZvcm1TZXR0aW5nc1xyXG4gKi9cclxuY29uc3QgZW5hYmxlRm9ybVZhbGlkYXRpb24gPSAoZm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLnBvcHVwRm9ybSkpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIEdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybVxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSB2YWxpZGF0b3IgYnkgdGhlIGBuYW1lYCBvZiB0aGUgZm9ybVxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBpbnN0YW5jZXMgb2YgQ2xhc3Nlc1xyXG5jb25zdCBhcGlIZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xyXG4gIGF1dGhvcml6YXRpb246IFwiYTM5N2NkMzctNWZmZC00Y2M5LWE4MGYtOTU5OTU3ODEyM2MzXCIsXHJcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgaGVhZGVyczogYXBpSGVhZGVycyxcclxufSk7XHJcblxyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKCk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxyXG4gIH0sXHJcbiAgc2VsZWN0b3JzLmNhcmRzQ29udGFpbmVyXHJcbik7XHJcblxyXG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wb3B1cEltYWdlKTtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5lZGl0QXZhdGFyUG9wdXAsIHtcclxuICBoYW5kbGVTdWJtaXQ6IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGVkaXRBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIC8vIERlc3RydWN0dXJlIGFuZCByZWFzc2lnbiB2YWx1ZXMgb2JqZWN0XHJcbiAgICBjb25zdCBhdmF0YXIgPSBlZGl0QXZhdGFyUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyQXZhdGFyKGF2YXRhcilcclxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlci5yZW5kZXJVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICAgICAgZWRpdEF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChhcGkuaGFuZGxlRXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5lZGl0UHJvZmlsZVBvcHVwLCB7XHJcbiAgaGFuZGxlU3VibWl0OiAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgLy8gRGVzdHJ1Y3R1cmUgYW5kIHJlYXNzaWduIHZhbHVlcyBvYmplY3RcclxuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IGVkaXRQcm9maWxlUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pXHJcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXIucmVuZGVyVXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGFwaS5oYW5kbGVFcnJvcilcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmRlbGV0ZUNhcmRQb3B1cCwge1xyXG4gIGhhbmRsZVN1Ym1pdDogKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgLy9GaW5kIGFuZCBkZWxldGUgdGhlIGNhcmRcclxuICAgIGNvbnN0IHsgY2FyZElkIH0gPSBkZWxldGVDYXJkUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FyZElkKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChhcGkuaGFuZGxlRXJyb3IpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZENhcmRQb3B1cCwge1xyXG4gIGhhbmRsZVN1Ym1pdDogKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBcIkNyZWF0aW5nLi4uXCIpO1xyXG5cclxuICAgIC8vIERlc3RydWN0dXJlIGFuZCByZWFzc2lnbiB2YWx1ZXMgb2JqZWN0XHJcbiAgICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGFkZENhcmRQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgIGFwaVxyXG4gICAgICAuYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSlcclxuICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRGF0YSk7XHJcbiAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChhcGkuaGFuZGxlRXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBjbGFzcyBpbnN0YW5jZXNcclxuYXBpXHJcbiAgLmdldEFwcEluZm8oKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzRGF0YV0pID0+IHtcclxuICAgIHVzZXIucmVuZGVyVXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHNEYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaChhcGkuaGFuZGxlRXJyb3IpO1xyXG5cclxuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5lZGl0QXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBFbmFibGUgRm9ybSBWYWxpZGF0aW9uXHJcbmVuYWJsZUZvcm1WYWxpZGF0aW9uKGZvcm1TZXR0aW5ncyk7XHJcblxyXG4vLyBCdXR0b24gQ2xpY2sgRXZlbnQgTGlzdGVuZXJzXHJcbmVkaXRBdmF0YXJPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbc2VsZWN0b3JzLmF2YXRhckZvcm1OYW1lXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbc2VsZWN0b3JzLnByb2ZpbGVGb3JtTmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5jYXJkRm9ybU5hbWVdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVNlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVFcnJvcihlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNhdWdodCBpbiBmZXRjaCBBUEk6ICR7ZXJyfWApO1xyXG4gIH1cclxuXHJcbiAgX2dldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QXBwSW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5fZ2V0VXNlckluZm8oKSwgdGhpcy5fZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBzZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnVzZXJOYW1lKTtcclxuICAgIHRoaXMuX3VzZXJBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnVzZXJBYm91dCk7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMudXNlckF2YXRhcik7XHJcbiAgICB0aGlzLl91c2VySW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnVzZXJJbmZvKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xyXG4gICAgY29uc3QgYWJvdXQgPSB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIHsgbmFtZSwgYWJvdXQgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlclVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB0aGlzLl91c2VySW5mby5pZCA9IF9pZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgY29uc3QgcmVuZGVyZWRJdGVtID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByZXBlbmQocmVuZGVyZWRJdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3N1YnRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJ0aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2VEYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZURhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBJbWFnZSAke2ltYWdlRGF0YS5uYW1lfWA7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCA9IGltYWdlRGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsic2VsZWN0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkSW1hZ2VDbGljayIsImhhbmRsZUNhcmREZWxldGVDbGljayIsImhhbmRsZUNhcmRMaWtlQ2xpY2siLCJ0aGlzIiwiX2RhdGEiLCJfdXNlcklkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkSW1hZ2VDbGljayIsIl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2siLCJfaGFuZGxlQ2FyZExpa2VDbGljayIsImNyZWF0ZUNhcmQiLCJfY2FyZCIsIl9nZXRFbGVtZW50IiwiX2NhcmROYW1lIiwiX2NhcmRJbWFnZSIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkTGlrZUNvdW50IiwiX2NhcmREZWxldGVCdXR0b24iLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwiX2lkIiwiX2dldExpa2VDb3VudCIsIl9maW5kTGlrZVN0YXR1cyIsIl9hdXRoZW50aWNhdGVDYXJkRGVsZXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9pc0xpa2VkIiwiX2dldExpa2VkVXNlcklkcyIsImluY2x1ZGVzIiwiX3RvZ2dsZUNhcmRMaWtlQnV0dG9uIiwiX2xpc3RlbkNhcmRMaWtlQnV0dG9uQ2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwidXBkYXRlQ2FyZExpa2UiLCJfdXBkYXRlTGlrZUNvdW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibGlrZXMiLCJsZW5ndGgiLCJ0b1N0cmluZyIsIm1hcCIsImxpa2UiLCJvd25lciIsIl9zaG93Q2FyZERlbGV0ZUJ1dHRvbiIsImFkZCIsIl9saXN0ZW5DYXJkRGVsZXRlQnV0dG9uQ2xpY2siLCJjYXJkSWQiLCJfbGlzdGVuQ2FyZEltYWdlQ2xpY2siLCJfbGlzdGVuQ2FyZEltYWdlRXJyb3IiLCJfaGFuZGxlQ2FyZEltYWdlRXJyb3IiLCJwbGFjZWhvbGRlclBhdGgiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9zZWxlY3RvciIsIl9lbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfZm9ybSIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uSW5pdGlhbFRleHQiLCJyZXNldCIsImdldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiZWRpdEF2YXRhck92ZXJsYXkiLCJmb3JtVmFsaWRhdG9ycyIsImFwaUhlYWRlcnMiLCJIZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJoYW5kbGVFcnJvciIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIl9nZXRVc2VySW5mbyIsIl9nZXRJbml0aWFsQ2FyZHMiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZWRpdFVzZXJJbmZvIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJkZWxldGVDYXJkIiwiYWRkTGlrZSIsImRlbGV0ZUxpa2UiLCJlZGl0VXNlckF2YXRhciIsImF2YXRhciIsInVzZXIiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX3VzZXJBdmF0YXIiLCJfdXNlckluZm8iLCJnZXRVc2VySW5mbyIsInJlbmRlclVzZXJJbmZvIiwiY2FyZFNlY3Rpb24iLCJzZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsInJldmVyc2UiLCJpdGVtIiwiYWRkSXRlbSIsInJlbmRlcmVkSXRlbSIsInByZXBlbmQiLCJjYXJkIiwiaW1hZ2VEYXRhIiwiY2FyZFByZXZpZXdQb3B1cCIsImRlbGV0ZUNhcmRQb3B1cCIsImlzTGlrZWQiLCJjYXRjaCIsIl9pbWFnZSIsIl9zdWJ0aXRsZSIsImVkaXRBdmF0YXJQb3B1cCIsInByZXZlbnREZWZhdWx0IiwidXNlckRhdGEiLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVQb3B1cCIsImNhcmRFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRDYXJkUG9wdXAiLCJjYXJkRGF0YSIsImZvcm1TZXR0aW5ncyIsImNhcmRzRGF0YSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwidXNlckluZm8iLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9