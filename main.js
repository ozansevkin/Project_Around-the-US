!function(){"use strict";const e=".popup__form";class t{constructor(e,t){let{data:s,handleCardImageClick:i}=e;this._data=s,this._name=s.name,this._link=s.link,this._templateSelector=t,this._handleCardImageClick=i}createCard(){return this._card=this._getElement(),this._cardTitle=this._card.querySelector(".card__title"),this._cardImage=this._card.querySelector(".card__image"),this._cardLikeButton=this._card.querySelector(".card__like-button"),this._cardDeleteButton=this._card.querySelector(".card__delete-button"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._card}_getElement(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_listenCardLikeButtonClick(){this._cardLikeButton.addEventListener("click",(()=>{this._toggleCardLikeButton()}))}_toggleCardLikeButton(){this._cardLikeButton.classList.toggle("card__like-button_clicked")}_listenCardDeleteButtonClick(){this._cardDeleteButton.addEventListener("click",(()=>{this._deleteCard()}))}_deleteCard(){this._card.remove(),this._card=null}_listenCardImageClick(){this._cardImage.addEventListener("click",(()=>{this._handleCardImageClick(this._data)}))}_setEventListeners(){this._listenCardLikeButtonClick(),this._listenCardDeleteButtonClick(),this._listenCardImageClick()}}class s{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}}class i{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._selector=e,this._element=document.querySelector(this._selector)}open(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._element.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()})),this._element.addEventListener("click",(e=>{e.target.classList.contains("popup__close-button")&&this.close()}))}}class n extends i{constructor(t,s){let{submitForm:i}=s;super(t),this._submitForm=i,this._form=this._element.querySelector(e),this._inputList=this._element.querySelectorAll(".popup__input")}close(){super.close(),this._form.reset()}getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._element.addEventListener("submit",this._submitForm)}}const r=document.querySelector(".profile__edit-button"),o=document.querySelector(".profile__add-button"),a={},l=new class{constructor(e){let{userNameSelector:t,userTitleSelector:s}=e;this._userName=document.querySelector(t),this._userTitle=document.querySelector(s)}getUserInfo(){return{name:this._userName.textContent,title:this._userTitle.textContent}}setUserInfo(e){let{formInputName:t,formInputTitle:s}=e;this._userName.textContent=t,this._userTitle.textContent=s}}({userNameSelector:".profile__name",userTitleSelector:".profile__title"}),c=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._element=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._element.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>function(e){return new t({data:e,handleCardImageClick:e=>{u.open(e)}},"#card-template").createCard()}(e)},".cards"),u=new class extends i{constructor(e){super(e),this._image=this._element.querySelector(".popup__image"),this._subtitle=this._element.querySelector(".popup__subtitle")}open(e){this._image.src=e.link,this._image.alt=`Image ${e.name}`,this._subtitle.textContent=e.name,super.open()}}(".popup_type_image"),_=new n(".popup_type_edit",{submitForm:e=>{e.preventDefault();const{name:t,title:s}=_.getInputValues();l.setUserInfo({formInputName:t,formInputTitle:s}),_.close()}}),d=new n(".popup_type_add",{submitForm:e=>{e.preventDefault();const{title:t,link:s}=d.getInputValues();c.addItem({name:t,link:s}),d.close()}});var h;c.renderItems(),u.setEventListeners(),_.setEventListeners(),d.setEventListeners(),h={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_error",errorClass:"popup__input-error-text_active"},Array.from(document.querySelectorAll(e)).forEach((e=>{const t=new s(h,e),i=e.getAttribute("name");a[i]=t,t.enableValidation()})),r.addEventListener("click",(()=>{a["profile-form"].resetValidation(),function(){const e=l.getUserInfo();_.setInputValues(e)}(),_.open()})),o.addEventListener("click",(()=>{a["card-form"].resetValidation(),d.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFrQ01BLEVBWUEsZUM1Q0UsTUFBTUMsRUFDbkJDLFlBQVksRUFBZ0NDLEdBQWtCLElBQWxELEtBQUVDLEVBQUkscUJBQUVDLEdBQXNCLEVBQ3hDQyxLQUFLQyxNQUFRSCxFQUNiRSxLQUFLRSxNQUFRSixFQUFLSyxLQUNsQkgsS0FBS0ksTUFBUU4sRUFBS08sS0FDbEJMLEtBQUtNLGtCQUFvQlQsRUFDekJHLEtBQUtPLHNCQUF3QlIsQ0FDL0IsQ0FFQVMsYUFnQkUsT0FmQVIsS0FBS1MsTUFBUVQsS0FBS1UsY0FFbEJWLEtBQUtXLFdBQWFYLEtBQUtTLE1BQU1HLGNEd0JwQixnQkN2QlRaLEtBQUthLFdBQWFiLEtBQUtTLE1BQU1HLGNEd0JwQixnQkN2QlRaLEtBQUtjLGdCQUFrQmQsS0FBS1MsTUFBTUcsY0R3QnBCLHNCQ3ZCZFosS0FBS2Usa0JBQW9CZixLQUFLUyxNQUFNRyxjRHlCcEIsd0JDckJoQlosS0FBS1csV0FBV0ssWUFBY2hCLEtBQUtFLE1BQ25DRixLQUFLYSxXQUFXSSxJQUFNakIsS0FBS0ksTUFDM0JKLEtBQUthLFdBQVdLLElBQU1sQixLQUFLRSxNQUUzQkYsS0FBS21CLHFCQUVFbkIsS0FBS1MsS0FDZCxDQUVBQyxjQUNFLE9BQU9VLFNBQ0pSLGNBQWNaLEtBQUtNLG1CQUNuQmUsUUFBUVQsY0RJUCxTQ0hEVSxXQUFVLEVBQ2YsQ0FFQUMsNkJBQ0V2QixLQUFLYyxnQkFBZ0JVLGlCQUFpQixTQUFTLEtBQzdDeEIsS0FBS3lCLHVCQUF1QixHQUVoQyxDQUVBQSx3QkFDRXpCLEtBQUtjLGdCQUFnQlksVUFBVUMsT0RITiw0QkNJM0IsQ0FFQUMsK0JBQ0U1QixLQUFLZSxrQkFBa0JTLGlCQUFpQixTQUFTLEtBQy9DeEIsS0FBSzZCLGFBQWEsR0FFdEIsQ0FFQUEsY0FDRTdCLEtBQUtTLE1BQU1xQixTQUNYOUIsS0FBS1MsTUFBUSxJQUNmLENBRUFzQix3QkFDRS9CLEtBQUthLFdBQVdXLGlCQUFpQixTQUFTLEtBQ3hDeEIsS0FBS08sc0JBQXNCUCxLQUFLQyxNQUFNLEdBRTFDLENBRUFrQixxQkFDRW5CLEtBQUt1Qiw2QkFDTHZCLEtBQUs0QiwrQkFDTDVCLEtBQUsrQix1QkFDUCxFQ3BFYSxNQUFNQyxFQUNuQnBDLFlBQVlxQyxFQUFVQyxHQUNwQmxDLEtBQUttQyxVQUFZRixFQUNqQmpDLEtBQUtvQyxhQUFlRixFQUNwQmxDLEtBQUtxQyxXQUFhQyxNQUFNQyxLQUN0QnZDLEtBQUtvQyxhQUFhSSxpQkFBaUJ4QyxLQUFLbUMsVUFBVU0sZ0JBRXBEekMsS0FBSzBDLGVBQWlCMUMsS0FBS29DLGFBQWF4QixjQUN0Q1osS0FBS21DLFVBQVVRLHFCQUVuQixDQUVBQyxtQkFDRTVDLEtBQUs2QyxxQkFFTDdDLEtBQUtxQyxXQUFXUyxTQUFTQyxJQUN2QkEsRUFBYXZCLGlCQUFpQixTQUFTLEtBQ3JDeEIsS0FBS2dELG9CQUFvQkQsR0FDekIvQyxLQUFLNkMsb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQUksa0JBQ0VqRCxLQUFLNkMscUJBRUw3QyxLQUFLcUMsV0FBV1MsU0FBU0MsSUFDdkIvQyxLQUFLa0QsZ0JBQWdCSCxFQUFhLEdBRXRDLENBRUFGLHFCQUNNN0MsS0FBS21ELG9CQUNQbkQsS0FBSzBDLGVBQWVoQixVQUFVMEIsSUFBSXBELEtBQUttQyxVQUFVa0IscUJBQ2pEckQsS0FBSzBDLGVBQWVZLGFBQWEsWUFBWSxLQUU3Q3RELEtBQUswQyxlQUFlaEIsVUFBVUksT0FBTzlCLEtBQUttQyxVQUFVa0IscUJBQ3BEckQsS0FBSzBDLGVBQWVhLGdCQUFnQixZQUV4QyxDQUVBSixtQkFDRSxPQUFPbkQsS0FBS3FDLFdBQVdtQixNQUFNQyxJQUNuQkEsRUFBTUMsU0FBU0MsT0FFM0IsQ0FFQVgsb0JBQW9CRCxHQUNiQSxFQUFhVyxTQUFTQyxNQUd6QjNELEtBQUtrRCxnQkFBZ0JILEdBRnJCL0MsS0FBSzRELGdCQUFnQmIsRUFBY0EsRUFBYWMsa0JBSXBELENBRUFELGdCQUFnQmIsRUFBY2UsR0FDNUIsTUFBTUMsRUFBZS9ELEtBQUtvQyxhQUFheEIsY0FDcEMsSUFBR21DLEVBQWFpQixZQUduQmpCLEVBQWFyQixVQUFVMEIsSUFBSXBELEtBQUttQyxVQUFVOEIsaUJBQzFDRixFQUFhL0MsWUFBYzhDLEVBQzNCQyxFQUFhckMsVUFBVTBCLElBQUlwRCxLQUFLbUMsVUFBVStCLFdBQzVDLENBRUFoQixnQkFBZ0JILEdBQ2QsTUFBTWdCLEVBQWUvRCxLQUFLb0MsYUFBYXhCLGNBQ3BDLElBQUdtQyxFQUFhaUIsWUFHbkJqQixFQUFhckIsVUFBVUksT0FBTzlCLEtBQUttQyxVQUFVOEIsaUJBQzdDRixFQUFhckMsVUFBVUksT0FBTzlCLEtBQUttQyxVQUFVK0IsWUFDN0NILEVBQWEvQyxZQUFjLEVBQzdCLEVDekVhLE1BQU1tRCxFQUNuQnZFLFlBQVl3RSxHLFVBZ0JPQyxJQUNELFdBQVpBLEVBQUlDLEtBQ050RSxLQUFLdUUsT0FDUCxHLEVBbkJ5QiwwQixzQkFBQSxLLHVEQUFBLEssS0FDekJ2RSxLQUFLd0UsVUFBWUosRUFDakJwRSxLQUFLeUUsU0FBV3JELFNBQVNSLGNBQWNaLEtBQUt3RSxVQUM5QyxDQUVBRSxPQUNFMUUsS0FBS3lFLFNBQVMvQyxVQUFVMEIsSUFBSSxnQkFDNUJoQyxTQUFTSSxpQkFBaUIsVUFBV3hCLEtBQUsyRSxnQkFDNUMsQ0FFQUosUUFDRXZFLEtBQUt5RSxTQUFTL0MsVUFBVUksT0FBTyxnQkFDL0JWLFNBQVN3RCxvQkFBb0IsVUFBVzVFLEtBQUsyRSxnQkFDL0MsQ0FTQUUsb0JBRUU3RSxLQUFLeUUsU0FBU2pELGlCQUFpQixhQUFjNkMsSUFDdkNBLEVBQUlTLFNBQVdULEVBQUlVLGVBQ3JCL0UsS0FBS3VFLE9BQ1AsSUFJRnZFLEtBQUt5RSxTQUFTakQsaUJBQWlCLFNBQVU2QyxJQUNuQ0EsRUFBSVMsT0FBT3BELFVBQVVzRCxTQUFTLHdCQUNoQ2hGLEtBQUt1RSxPQUNQLEdBRUosRUNsQ2EsTUFBTVUsVUFBc0JkLEVBQ3pDdkUsWUFBWXNGLEVBQVUsR0FBZ0IsSUFBaEIsV0FBRUMsR0FBWSxFQUNsQ0MsTUFBTUYsR0FDTmxGLEtBQUtxRixZQUFjRixFQUNuQm5GLEtBQUtzRixNQUFRdEYsS0FBS3lFLFNBQVM3RCxjQUFjbEIsR0FDekNNLEtBQUtxQyxXQUFhckMsS0FBS3lFLFNBQVNqQyxpQkp1Q3RCLGdCSXRDWixDQUVBK0IsUUFDRWEsTUFBTWIsUUFDTnZFLEtBQUtzRixNQUFNQyxPQUNiLENBRUFDLGlCQVFFLE9BTkF4RixLQUFLeUYsWUFBYyxDQUFDLEVBRXBCekYsS0FBS3FDLFdBQVdTLFNBQVNXLElBQ3ZCekQsS0FBS3lGLFlBQVloQyxFQUFNdEQsTUFBUXNELEVBQU1pQyxLQUFLLElBR3JDMUYsS0FBS3lGLFdBQ2QsQ0FFQUUsZUFBZTdGLEdBQ2JFLEtBQUtxQyxXQUFXUyxTQUFTVyxJQUV2QkEsRUFBTWlDLE1BQVE1RixFQUFLMkQsRUFBTXRELEtBQUssR0FFbEMsQ0FFQTBFLG9CQUNFTyxNQUFNUCxvQkFHTjdFLEtBQUt5RSxTQUFTakQsaUJBQWlCLFNBQVV4QixLQUFLcUYsWUFDaEQsRUMxQkYsTUFBTU8sRUFBb0J4RSxTQUFTUixjTHFDckIseUJLcENSaUYsRUFBZ0J6RSxTQUFTUixjTHFDbEIsd0JLcENQa0YsRUFBaUIsQ0FBQyxFQXFEbEJDLEVBQU8sSUNwRUUsTUFDYm5HLFlBQVksR0FBeUMsSUFBekMsaUJBQUVvRyxFQUFnQixrQkFBRUMsR0FBbUIsRUFDakRqRyxLQUFLa0csVUFBWTlFLFNBQVNSLGNBQWNvRixHQUN4Q2hHLEtBQUttRyxXQUFhL0UsU0FBU1IsY0FBY3FGLEVBQzNDLENBRUFHLGNBSUUsTUFBTyxDQUFFakcsS0FISUgsS0FBS2tHLFVBQVVsRixZQUdicUYsTUFGRHJHLEtBQUttRyxXQUFXbkYsWUFHaEMsQ0FFQXNGLFlBQVksR0FBbUMsSUFBbkMsY0FBRUMsRUFBYSxlQUFFQyxHQUFnQixFQUMzQ3hHLEtBQUtrRyxVQUFVbEYsWUFBY3VGLEVBQzdCdkcsS0FBS21HLFdBQVduRixZQUFjd0YsQ0FDaEMsR0RvRHdCLENBQ3hCUixpQkxyQlUsaUJLc0JWQyxrQkxyQlcsb0JLd0JQUSxFQUFjLElFekVMLE1BQ2I3RyxZQUFZLEVBQXFCc0YsR0FBVSxJQUEvQixNQUFFd0IsRUFBSyxTQUFFQyxHQUFVLEVBQzdCM0csS0FBSzRHLE9BQVNGLEVBQ2QxRyxLQUFLNkcsVUFBWUYsRUFDakIzRyxLQUFLeUUsU0FBV3JELFNBQVNSLGNBQWNzRSxFQUN6QyxDQUVBNEIsY0FDRTlHLEtBQUs0RyxPQUFPOUQsU0FBU2lFLElBQ25CL0csS0FBS2dILFFBQVFELEVBQUssR0FFdEIsQ0FFQUMsUUFBUUQsR0FDTixNQUFNRSxFQUFlakgsS0FBSzZHLFVBQVVFLEdBQ3BDL0csS0FBS3lFLFNBQVN5QyxRQUFRRCxFQUN4QixHRjBEQSxDQUNFUCxNTDNFd0IsQ0FDMUIsQ0FDRXZHLEtBQU0sa0JBQ05FLEtBQU0sb0RBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHVEQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sMERBRVIsQ0FBRUYsS0FBTSxVQUFXRSxLQUFNLG1EQUN6QixDQUNFRixLQUFNLHdCQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0saURLd0ROc0csU0FBVzdHLEdBM0NmLFNBQW9CQSxHQWFsQixPQVphLElBQUlILEVBQ2YsQ0FDRUcsT0FDQUMscUJBQXVCb0gsSUFDckJDLEVBQWlCMUMsS0FBS3lDLEVBQVUsR0xGeEIsa0JLUVczRyxZQUczQixDQThCYUEsQ0FBV1YsSUwxQ04sVUtnRFpzSCxFQUFtQixJR2pGVixjQUE2QmpELEVBQzFDdkUsWUFBWXdFLEdBQ1ZnQixNQUFNaEIsR0FDTnBFLEtBQUtxSCxPQUFTckgsS0FBS3lFLFNBQVM3RCxjQUFjLGlCQUMxQ1osS0FBS3NILFVBQVl0SCxLQUFLeUUsU0FBUzdELGNBQWMsbUJBQy9DLENBRUE4RCxLQUFLeUMsR0FDSG5ILEtBQUtxSCxPQUFPcEcsSUFBTWtHLEVBQVU5RyxLQUM1QkwsS0FBS3FILE9BQU9uRyxJQUFPLFNBQVFpRyxFQUFVaEgsT0FDckNILEtBQUtzSCxVQUFVdEcsWUFBY21HLEVBQVVoSCxLQUN2Q2lGLE1BQU1WLE1BQ1IsR1I2QlkscUJLMENSNkMsRUFBbUIsSUFBSXRDLEVMekNULG1CS3lDbUQsQ0FDckVFLFdBQWFkLElBQ1hBLEVBQUltRCxpQkFHSixNQUFRckgsS0FBTW9HLEVBQWVGLE1BQU9HLEdBQ2xDZSxFQUFpQi9CLGlCQUVuQk8sRUFBS08sWUFBWSxDQUFFQyxnQkFBZUMsbUJBRWxDZSxFQUFpQmhELE9BQU8sSUFJdEJrRCxFQUFlLElBQUl4QyxFTHREVCxrQktzRCtDLENBQzdERSxXQUFhZCxJQUNYQSxFQUFJbUQsaUJBR0osTUFBUW5CLE1BQU9sRyxFQUFJLEtBQUVFLEdBQVNvSCxFQUFhakMsaUJBRTNDaUIsRUFBWU8sUUFBUSxDQUFFN0csT0FBTUUsU0FFNUJvSCxFQUFhbEQsT0FBTyxJQXRETW1ELE1BMkQ5QmpCLEVBQVlLLGNBQ1pNLEVBQWlCdkMsb0JBQ2pCMEMsRUFBaUIxQyxvQkFDakI0QyxFQUFhNUMsb0JBOURpQjZDLEVMN0JGLENBQzFCakYsY0FBZSxnQkFDZkUscUJBQXNCLHdCQUN0QlUsb0JBQXFCLGdDQUNyQlksZ0JBQWlCLHFCQUNqQkMsV0FBWSxrQ0t5Qks1QixNQUFNQyxLQUFLbkIsU0FBU29CLGlCQUFpQjlDLElBQzdDb0QsU0FBU1osSUFDaEIsTUFBTXlGLEVBQVksSUFBSTNGLEVBQWMwRixFQUFjeEYsR0FFNUMwRixFQUFXMUYsRUFBWTJGLGFBQWEsUUFHMUMvQixFQUFlOEIsR0FBWUQsRUFDM0JBLEVBQVUvRSxrQkFBa0IsSUEyRGhDZ0QsRUFBa0JwRSxpQkFBaUIsU0FBUyxLQUMxQ3NFLEVMdkVpQixnQkt1RXlCN0Msa0JBckc1QyxXQUNFLE1BQU02RSxFQUFXL0IsRUFBS0ssY0FDdEJtQixFQUFpQjVCLGVBQWVtQyxFQUNsQyxDQW1HRUMsR0FDQVIsRUFBaUI3QyxNQUFNLElBR3pCbUIsRUFBY3JFLGlCQUFpQixTQUFTLEtBQ3RDc0UsRUw1RWMsYUs0RXlCN0Msa0JBQ3ZDd0UsRUFBYS9DLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAgeyBuYW1lOiBcIkxhdGVtYXJcIiwgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gU2V0dGluZ3MgZm9yIGZvcm0gdmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3ItdGV4dF9hY3RpdmVcIixcclxufTtcclxuXHJcbi8vIFNlbGVjdG9yc1xyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRzQ29udGFpbmVyOiBcIi5jYXJkc1wiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIGNhcmQ6IFwiLmNhcmRcIixcclxuICBjYXJkVGl0bGU6IFwiLmNhcmRfX3RpdGxlXCIsXHJcbiAgY2FyZEltYWdlOiBcIi5jYXJkX19pbWFnZVwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uOiBcIi5jYXJkX19saWtlLWJ1dHRvblwiLFxyXG4gIGNhcmRMaWtlQnV0dG9uQWN0aXZlQ2xhc3M6IFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiLFxyXG4gIGNhcmREZWxldGVCdXR0b246IFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIixcclxuICBwb3B1cEltYWdlOiBcIi5wb3B1cF90eXBlX2ltYWdlXCIsXHJcbiAgZWRpdFByb2ZpbGVQb3B1cDogXCIucG9wdXBfdHlwZV9lZGl0XCIsXHJcbiAgYWRkQ2FyZFBvcHVwOiBcIi5wb3B1cF90eXBlX2FkZFwiLFxyXG4gIHBvcHVwRm9ybTogXCIucG9wdXBfX2Zvcm1cIixcclxuICBwb3B1cElucHV0OiBcIi5wb3B1cF9faW5wdXRcIixcclxuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHVzZXJUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBlZGl0QnV0dG9uOiBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiLFxyXG4gIGFkZEJ1dHRvbjogXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiLFxyXG4gIHByb2ZpbGVGb3JtTmFtZTogXCJwcm9maWxlLWZvcm1cIixcclxuICBjYXJkRm9ybU5hbWU6IFwiY2FyZC1mb3JtXCIsXHJcbn07XHJcbiIsImltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZEltYWdlQ2xpY2sgfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZEltYWdlQ2xpY2sgPSBoYW5kbGVDYXJkSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZFRpdGxlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZEltYWdlKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkTGlrZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZERlbGV0ZUJ1dHRvblxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gIH1cclxuXHJcbiAgX2dldEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZClcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlQ2FyZExpa2VCdXR0b24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUNhcmRMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShzZWxlY3RvcnMuY2FyZExpa2VCdXR0b25BY3RpdmVDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfbGlzdGVuQ2FyZERlbGV0ZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2xpc3RlbkNhcmRJbWFnZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrKCk7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkRGVsZXRlQnV0dG9uQ2xpY2soKTtcclxuICAgIHRoaXMuX2xpc3RlbkNhcmRJbWFnZUNsaWNrKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gQXJyb3cgbWV0aG9kXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gT3ZlcmxheSBDbG9zZVxyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDbG9zZSBCdXR0b25cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCB7IHN1Ym1pdEZvcm0gfSkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEZvcm0pO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5wb3B1cElucHV0KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgLy9jb2xsZWN0cyBkYXRhIGZyb20gYWxsIHRoZSBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnMgdGhhdCBkYXRhIGFzIGFuIG9iamVjdC5cclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgLy8gSW5zZXJ0IHRoZSBgdmFsdWVgIGJ5IHRoZSBgbmFtZWAgb2YgdGhlIGlucHV0XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIC8vIFN1Ym1pdFxyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEZvcm0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBJbXBvcnQgQ1NTIGZvciBXZWJwYWNrXHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG4vLyBJbXBvcnQgY2xhc3NzZXMgYW5kIGNvbnN0YW50c1xyXG5pbXBvcnQgeyBzZWxlY3RvcnMsIGluaXRpYWxDYXJkcywgZm9ybVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuXHJcbi8vIFZhcmlhYmxlIERlY2xhcmF0aW9uc1xyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRCdXR0b24pO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYWRkQnV0dG9uKTtcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuXHJcbi8vIEZ1bmN0aW9uIERlY2xhcmF0aW9uc1xyXG5cclxuLyoqXHJcbiAqIEZpbGxzIHByb2ZpbGUgZm9ybSB3aXRoIGN1cnJlbnQgcHJvZmlsZSBpbmZvXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XHJcbiAgY29uc3QgdXNlckluZm8gPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mbyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IGNhcmQgZWxlbWVudCB3aXRoIGdpdmVuIGRhdGEgKG5hbWUgYW5kIGltYWdlIGxpbmspXHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IGNhcmRFbGVtZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGhhbmRsZUNhcmRJbWFnZUNsaWNrOiAoaW1hZ2VEYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuKGltYWdlRGF0YSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5jcmVhdGVDYXJkKCk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEVuYWJsZXMgZm9ybSB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXMgYW5kIG1ha2VzIGl0IGFjY2VzaWJsZSBieSAnbmFtZSdcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGZvcm1TZXR0aW5nc1xyXG4gKi9cclxuY29uc3QgZW5hYmxlRm9ybVZhbGlkYXRpb24gPSAoZm9ybVNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLnBvcHVwRm9ybSkpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vIEdldCB0aGUgbmFtZSBvZiB0aGUgZm9ybVxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSB2YWxpZGF0b3IgYnkgdGhlIGBuYW1lYCBvZiB0aGUgZm9ybVxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBpbnN0YW5jZXMgb2YgQ2xhc3Nlc1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBzZWxlY3RvcnMudXNlck5hbWUsXHJcbiAgdXNlclRpdGxlU2VsZWN0b3I6IHNlbGVjdG9ycy51c2VyVGl0bGUsXHJcbn0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkc0NvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucG9wdXBJbWFnZSk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmVkaXRQcm9maWxlUG9wdXAsIHtcclxuICBzdWJtaXRGb3JtOiAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAvLyBEZXN0cnVjdHVyZSBhbmQgcmVhc3NpZ24gdmFsdWVzIG9iamVjdFxyXG4gICAgY29uc3QgeyBuYW1lOiBmb3JtSW5wdXROYW1lLCB0aXRsZTogZm9ybUlucHV0VGl0bGUgfSA9XHJcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKHsgZm9ybUlucHV0TmFtZSwgZm9ybUlucHV0VGl0bGUgfSk7XHJcblxyXG4gICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZENhcmRQb3B1cCwge1xyXG4gIHN1Ym1pdEZvcm06IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIC8vIERlc3RydWN0dXJlIGFuZCByZWFzc2lnbiB2YWx1ZXMgb2JqZWN0XHJcbiAgICBjb25zdCB7IHRpdGxlOiBuYW1lLCBsaW5rIH0gPSBhZGRDYXJkUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKHsgbmFtZSwgbGluayB9KTtcclxuXHJcbiAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIEluaXRpYWxpemUgY2xhc3MgaW5zdGFuY2VzXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEVuYWJsZSBGb3JtIFZhbGlkYXRpb25cclxuZW5hYmxlRm9ybVZhbGlkYXRpb24oZm9ybVNldHRpbmdzKTtcclxuXHJcbi8vIEJ1dHRvbiBDbGljayBFdmVudCBMaXN0ZW5lcnNcclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tzZWxlY3RvcnMucHJvZmlsZUZvcm1OYW1lXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBmaWxsUHJvZmlsZUZvcm0oKTtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbc2VsZWN0b3JzLmNhcmRGb3JtTmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJUaXRsZVNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlclRpdGxlU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBuYW1lID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICBjb25zdCB0aXRsZSA9IHRoaXMuX3VzZXJUaXRsZS50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4geyBuYW1lLCB0aXRsZSB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBmb3JtSW5wdXROYW1lLCBmb3JtSW5wdXRUaXRsZSB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGZvcm1JbnB1dE5hbWU7XHJcbiAgICB0aGlzLl91c2VyVGl0bGUudGV4dENvbnRlbnQgPSBmb3JtSW5wdXRUaXRsZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCByZW5kZXJlZEl0ZW0gPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZChyZW5kZXJlZEl0ZW0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fc3VidGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1YnRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWFnZURhdGEpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGltYWdlRGF0YS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYEltYWdlICR7aW1hZ2VEYXRhLm5hbWV9YDtcclxuICAgIHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50ID0gaW1hZ2VEYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJzZWxlY3RvcnMiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRJbWFnZUNsaWNrIiwidGhpcyIsIl9kYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJjcmVhdGVDYXJkIiwiX2NhcmQiLCJfZ2V0RWxlbWVudCIsIl9jYXJkVGl0bGUiLCJxdWVyeVNlbGVjdG9yIiwiX2NhcmRJbWFnZSIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkRGVsZXRlQnV0dG9uIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlzdGVuQ2FyZExpa2VCdXR0b25DbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlQ2FyZExpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfbGlzdGVuQ2FyZERlbGV0ZUJ1dHRvbkNsaWNrIiwiX2RlbGV0ZUNhcmQiLCJyZW1vdmUiLCJfbGlzdGVuQ2FyZEltYWdlQ2xpY2siLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwiX3NlbGVjdG9yIiwiX2VsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsInNlbGVjdG9yIiwic3VibWl0Rm9ybSIsInN1cGVyIiwiX3N1Ym1pdEZvcm0iLCJfZm9ybSIsInJlc2V0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJmb3JtVmFsaWRhdG9ycyIsInVzZXIiLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlclRpdGxlU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlclRpdGxlIiwiZ2V0VXNlckluZm8iLCJ0aXRsZSIsInNldFVzZXJJbmZvIiwiZm9ybUlucHV0TmFtZSIsImZvcm1JbnB1dFRpdGxlIiwiY2FyZFNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInJlbmRlcmVkSXRlbSIsInByZXBlbmQiLCJpbWFnZURhdGEiLCJjYXJkUHJldmlld1BvcHVwIiwiX2ltYWdlIiwiX3N1YnRpdGxlIiwiZWRpdFByb2ZpbGVQb3B1cCIsInByZXZlbnREZWZhdWx0IiwiYWRkQ2FyZFBvcHVwIiwiZm9ybVNldHRpbmdzIiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJ1c2VySW5mbyIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=