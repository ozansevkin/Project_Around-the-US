!function(){"use strict";const e=".popup__form",t=".profile__info";class s{constructor(e,s){let{data:r,handleCardImageClick:i,handleCardDeleteClick:n,handleCardLikeClick:a}=e;this._data=r,this._name=r.name,this._link=r.link,this._likes=r.likes,this._id=r._id,this._userId=document.querySelector(t).id,this._ownerId=r.owner._id,this._templateSelector=s,this._handleCardImageClick=i,this._handleCardDeleteClick=n,this._handleCardLikeClick=a}createCard(){return this._card=this._getElement(),this._cardName=this._card.querySelector(".card__name"),this._cardImage=this._card.querySelector(".card__image"),this._cardLikeButton=this._card.querySelector(".card__like-button"),this._cardLikeCount=this._card.querySelector(".card__like-count"),this._cardDeleteButton=this._card.querySelector(".card__delete-button"),this._cardName.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._card.id=this._id,this._cardLikeCount.textContent=this._getLikeCount(this._data),this._findLikeStatus(),this._authenticateCardDelete(),this._setEventListeners(),this._card}_getElement(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_findLikeStatus(){this._isLiked=this._getLikedUserIds().includes(this._userId),this._isLiked&&this._toggleCardLikeButton()}_listenCardLikeButtonClick(){this._cardLikeButton.addEventListener("click",(()=>{this._toggleCardLikeButton(),this._handleCardLikeClick(this._id,this._isLiked),this._isLiked=!this._isLiked}))}_toggleCardLikeButton(){this._cardLikeButton.classList.toggle("card__like-button_clicked")}_getLikeCount(e){return e.likes.length.toString()}updateLikeCount(e){this._cardLikeCount.textContent=this._getLikeCount(e)}_getLikedUserIds(){return this._likes.map((e=>e._id))}_authenticateCardDelete(){this._userId==this._ownerId&&this._showCardDeleteButton()}_showCardDeleteButton(){this._cardDeleteButton.classList.add("card__delete-button_visible")}_listenCardDeleteButtonClick(){this._cardDeleteButton.addEventListener("click",(()=>{this._handleCardDeleteClick({cardId:this._id})}))}_listenCardImageClick(){this._cardImage.addEventListener("click",(()=>{this._handleCardImageClick(this._data)}))}_setEventListeners(){this._listenCardLikeButtonClick(),this._listenCardDeleteButtonClick(),this._listenCardImageClick()}}class r{constructor(e,t){this._settings=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}enableValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._settings.inputErrorClass),s.textContent=t,s.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}}class i{constructor(e){var t,s;s=e=>{"Escape"===e.key&&this.close()},(t="_handleEscClose")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[t]=s,this._selector=e,this._element=document.querySelector(this._selector)}open(){this._element.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._element.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._element.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()})),this._element.addEventListener("click",(e=>{e.target.classList.contains("popup__close-button")&&this.close()}))}}class n extends i{constructor(t,s){let{submitForm:r}=s;super(t),this._submitForm=r,this._form=this._element.querySelector(e),this._submitButton=this._element.querySelector(".popup__submit-button"),this._submitButtonInitialText=this._submitButton.textContent,this._inputList=this._element.querySelectorAll(".popup__input")}close(){super.close(),this._form.reset()}getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}enableLoadingState(){const e=new RegExp("e$");this._submitButton.textContent=this._submitButtonInitialText.replace(e,"ing...")}disableLoadingState(){this._submitButton.textContent=this._submitButtonInitialText}setEventListeners(){super.setEventListeners(),this._element.addEventListener("submit",this._submitForm)}}const a=document.querySelector(".profile__edit-button"),o=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__avatar-wrapper"),d={},h=new Headers({authorization:"a397cd37-5ffd-4cc9-a80f-9599578123c3","Content-Type":"application/json"}),_=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleServerResponse(e){return e.ok?e.json():Promise.reject(e.status)}_handleError(e){console.error(`Error caught in fetch API: ${e}`)}_getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleServerResponse).catch(this._handleError)}_getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleServerResponse).catch(this._handleError)}getAppInfo(){return Promise.all([this._getUserInfo(),this._getInitialCards()])}editUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleServerResponse).catch(this._handleError)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleServerResponse).catch(this._handleError)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse).catch(this._handleError)}addLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._handleServerResponse).catch(this._handleError)}deleteLike(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleServerResponse).catch(this._handleError)}editUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleServerResponse).catch(this._handleError)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:h}),u=new class{constructor(){this._userName=document.querySelector(".profile__name"),this._userAbout=document.querySelector(".profile__about"),this._userAvatar=document.querySelector(".profile__avatar"),this._userInfo=document.querySelector(t)}getUserInfo(){return{name:this._userName.textContent,about:this._userAbout.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._userName.textContent=t,this._userAbout.textContent=s}setUserAvatar(e){this._userAvatar.src=e}renderUserInfo(e){let{name:t,about:s,avatar:r,_id:i}=e;this._userName.textContent=t,this._userAbout.textContent=s,this._userAvatar.src=r,this._userInfo.id=i}},c=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._element=document.querySelector(t)}renderItems(e){e.reverse().forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._element.prepend(t)}}({renderer:e=>function(e){const t=new s({data:e,handleCardImageClick:e=>{m.open(e)},handleCardDeleteClick:e=>{g.setInputValues(e),g.open()},handleCardLikeClick:(e,s)=>{s?_.deleteLike(e).then((e=>t.updateLikeCount(e))):_.addLike(e).then((e=>t.updateLikeCount(e)))}},"#card-template");return t.createCard()}(e)},".cards"),m=new class extends i{constructor(e){super(e),this._image=this._element.querySelector(".popup__image"),this._subtitle=this._element.querySelector(".popup__subtitle")}open(e){this._image.src=e.link,this._image.alt=`Image ${e.name}`,this._subtitle.textContent=e.name,super.open()}}(".popup_type_image"),p=new n(".popup_type_avatar",{submitForm:e=>{e.preventDefault(),p.enableLoadingState();const t=p.getInputValues();_.editUserAvatar(t).then((e=>u.setUserAvatar(e.avatar))).finally((()=>{p.close(),p.disableLoadingState()}))}}),C=new n(".popup_type_edit",{submitForm:e=>{e.preventDefault(),C.enableLoadingState();const{name:t,about:s}=C.getInputValues();_.editUserInfo({name:t,about:s}).then((e=>u.setUserInfo(e))).finally((()=>{C.close(),C.disableLoadingState()}))}}),g=new n(".popup_type_delete",{submitForm:e=>{e.preventDefault();const{cardId:t}=g.getInputValues(),s=document.getElementById(t);_.deleteCard(t).then(s.remove()).finally(g.close())}}),b=new n(".popup_type_add",{submitForm:e=>{e.preventDefault(),b.enableLoadingState();const{name:t,link:s}=b.getInputValues();_.addNewCard({name:t,link:s}).then((e=>c.addItem(e))).finally((()=>{b.close(),b.disableLoadingState()}))}});var L;_.getAppInfo().then((e=>{let[t,s]=e;u.renderUserInfo(t),c.renderItems(s)})),m.setEventListeners(),p.setEventListeners(),C.setEventListeners(),b.setEventListeners(),g.setEventListeners(),L={inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_error",errorClass:"popup__input-error-text_active"},Array.from(document.querySelectorAll(e)).forEach((e=>{const t=new r(L,e),s=e.getAttribute("name");d[s]=t,t.enableValidation()})),l.addEventListener("click",(()=>{d["avatar-form"].resetValidation(),p.open()})),a.addEventListener("click",(()=>{d["profile-form"].resetValidation(),function(){const e=u.getUserInfo();C.setInputValues(e)}(),C.open()})),o.addEventListener("click",(()=>{d["card-form"].resetValidation(),b.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUIsU0FBUyxLQUN0Q2tGLEVMbktjLGFLbUt5QnBELGtCQUN2QzRILEVBQWFwRyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2V0dGluZ3MgZm9yIGZvcm0gdmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdC1idXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3ItdGV4dF9hY3RpdmVcIixcclxufTtcclxuXHJcbi8vIFNlbGVjdG9yc1xyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRzQ29udGFpbmVyOiBcIi5jYXJkc1wiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIGNhcmQ6IFwiLmNhcmRcIixcclxuICBjYXJkTmFtZTogXCIuY2FyZF9fbmFtZVwiLFxyXG4gIGNhcmRJbWFnZTogXCIuY2FyZF9faW1hZ2VcIixcclxuICBjYXJkTGlrZUJ1dHRvbjogXCIuY2FyZF9fbGlrZS1idXR0b25cIixcclxuICBjYXJkTGlrZUJ1dHRvbkFjdGl2ZUNsYXNzOiBcImNhcmRfX2xpa2UtYnV0dG9uX2NsaWNrZWRcIixcclxuICBjYXJkTGlrZUNvdW50OiBcIi5jYXJkX19saWtlLWNvdW50XCIsXHJcbiAgY2FyZERlbGV0ZUJ1dHRvbjogXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiLFxyXG4gIGNhcmREZWxldGVCdXR0b25WaXNpYmxlQ2xhc3M6IFwiY2FyZF9fZGVsZXRlLWJ1dHRvbl92aXNpYmxlXCIsXHJcbiAgcG9wdXBJbWFnZTogXCIucG9wdXBfdHlwZV9pbWFnZVwiLFxyXG4gIGVkaXRBdmF0YXJQb3B1cDogXCIucG9wdXBfdHlwZV9hdmF0YXJcIixcclxuICBlZGl0UHJvZmlsZVBvcHVwOiBcIi5wb3B1cF90eXBlX2VkaXRcIixcclxuICBhZGRDYXJkUG9wdXA6IFwiLnBvcHVwX3R5cGVfYWRkXCIsXHJcbiAgZGVsZXRlQ2FyZFBvcHVwOiBcIi5wb3B1cF90eXBlX2RlbGV0ZVwiLFxyXG4gIHBvcHVwRm9ybTogXCIucG9wdXBfX2Zvcm1cIixcclxuICBwb3B1cElucHV0OiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b246IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgdXNlck5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICB1c2VyQWJvdXQ6IFwiLnByb2ZpbGVfX2Fib3V0XCIsXHJcbiAgdXNlckF2YXRhcjogXCIucHJvZmlsZV9fYXZhdGFyXCIsXHJcbiAgdXNlckluZm86IFwiLnByb2ZpbGVfX2luZm9cIixcclxuICBlZGl0QXZhdGFyT3ZlcmxheTogXCIucHJvZmlsZV9fYXZhdGFyLXdyYXBwZXJcIixcclxuICBlZGl0QnV0dG9uOiBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiLFxyXG4gIGFkZEJ1dHRvbjogXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiLFxyXG4gIGF2YXRhckZvcm1OYW1lOiBcImF2YXRhci1mb3JtXCIsXHJcbiAgcHJvZmlsZUZvcm1OYW1lOiBcInByb2ZpbGUtZm9ybVwiLFxyXG4gIGNhcmRGb3JtTmFtZTogXCJjYXJkLWZvcm1cIixcclxufTtcclxuIiwiaW1wb3J0IHsgc2VsZWN0b3JzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IGRhdGEsIGhhbmRsZUNhcmRJbWFnZUNsaWNrLCBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssIGhhbmRsZUNhcmRMaWtlQ2xpY2sgfSxcclxuICAgIHRlbXBsYXRlU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMudXNlckluZm8pLmlkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2VDbGljayA9IGhhbmRsZUNhcmRJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZUNsaWNrID0gaGFuZGxlQ2FyZERlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2VDbGljayA9IGhhbmRsZUNhcmRMaWtlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldEVsZW1lbnQoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTmFtZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZE5hbWUpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5jYXJkSW1hZ2UpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmNhcmRMaWtlQnV0dG9uKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmNhcmRMaWtlQ291bnQpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcclxuICAgICAgc2VsZWN0b3JzLmNhcmREZWxldGVCdXR0b25cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmQuaWQgPSB0aGlzLl9pZDtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZ2V0TGlrZUNvdW50KHRoaXMuX2RhdGEpO1xyXG4gICAgdGhpcy5fZmluZExpa2VTdGF0dXMoKTtcclxuICAgIHRoaXMuX2F1dGhlbnRpY2F0ZUNhcmREZWxldGUoKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gIH1cclxuXHJcbiAgX2dldEVsZW1lbnQoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuY2FyZClcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9maW5kTGlrZVN0YXR1cygpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSB0aGlzLl9nZXRMaWtlZFVzZXJJZHMoKS5pbmNsdWRlcyh0aGlzLl91c2VySWQpO1xyXG5cclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUNhcmRMaWtlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbGlzdGVuQ2FyZExpa2VCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUNhcmRMaWtlQnV0dG9uKCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlQ2xpY2sodGhpcy5faWQsIHRoaXMuX2lzTGlrZWQpO1xyXG4gICAgICB0aGlzLl9pc0xpa2VkID0gIXRoaXMuX2lzTGlrZWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVDYXJkTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoc2VsZWN0b3JzLmNhcmRMaWtlQnV0dG9uQWN0aXZlQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2dldExpa2VDb3VudChkYXRhKSB7XHJcbiAgICByZXR1cm4gZGF0YS5saWtlcy5sZW5ndGgudG9TdHJpbmcoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VDb3VudChkYXRhKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fZ2V0TGlrZUNvdW50KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgX2dldExpa2VkVXNlcklkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5tYXAoKGxpa2UpID0+IGxpa2UuX2lkKTtcclxuICB9XHJcblxyXG4gIF9hdXRoZW50aWNhdGVDYXJkRGVsZXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX3VzZXJJZCA9PSB0aGlzLl9vd25lcklkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dDYXJkRGVsZXRlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0NhcmREZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIHNlbGVjdG9ycy5jYXJkRGVsZXRlQnV0dG9uVmlzaWJsZUNsYXNzXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2xpc3RlbkNhcmREZWxldGVCdXR0b25DbGljaygpIHtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZUNsaWNrKHsgY2FyZElkOiB0aGlzLl9pZCB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2xpc3RlbkNhcmRJbWFnZUNsaWNrKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrKCk7XHJcbiAgICB0aGlzLl9saXN0ZW5DYXJkRGVsZXRlQnV0dG9uQ2xpY2soKTtcclxuICAgIHRoaXMuX2xpc3RlbkNhcmRJbWFnZUNsaWNrKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gQXJyb3cgbWV0aG9kXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gT3ZlcmxheSBDbG9zZVxyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDbG9zZSBCdXR0b25cclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlLWJ1dHRvblwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCB7IHN1Ym1pdEZvcm0gfSkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEZvcm0pO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b24pO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uSW5pdGlhbFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLnBvcHVwSW5wdXQpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvL2NvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyB0aGF0IGRhdGEgYXMgYW4gb2JqZWN0LlxyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBJbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVMb2FkaW5nU3RhdGUoKSB7XHJcbiAgICBjb25zdCBlID0gbmV3IFJlZ0V4cChcImVcIiArIFwiJFwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbkluaXRpYWxUZXh0LnJlcGxhY2UoXHJcbiAgICAgIGUsXHJcbiAgICAgIFwiaW5nLi4uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlTG9hZGluZ1N0YXRlKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uSW5pdGlhbFRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gU3VibWl0XHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0Rm9ybSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIEltcG9ydCBDU1MgZm9yIFdlYnBhY2tcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vIEltcG9ydCBjbGFzc3NlcyBhbmQgY29uc3RhbnRzXHJcbmltcG9ydCB7IHNlbGVjdG9ycywgZm9ybVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvblwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuXHJcbi8vIFZhcmlhYmxlIERlY2xhcmF0aW9uc1xyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRCdXR0b24pO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYWRkQnV0dG9uKTtcclxuY29uc3QgZWRpdEF2YXRhck92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5lZGl0QXZhdGFyT3ZlcmxheSk7XHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG4vLyBGdW5jdGlvbiBEZWNsYXJhdGlvbnNcclxuXHJcbi8qKlxyXG4gKiBGaWxscyBwcm9maWxlIGZvcm0gd2l0aCBjdXJyZW50IHByb2ZpbGUgaW5mb1xyXG4gKi9cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8pO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBjYXJkIGVsZW1lbnQgd2l0aCBnaXZlbiBkYXRhIChuYW1lIGFuZCBpbWFnZSBsaW5rKVxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YVxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBjYXJkRWxlbWVudFxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkSW1hZ2VDbGljazogKGltYWdlRGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRQcmV2aWV3UG9wdXAub3BlbihpbWFnZURhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2s6IChjYXJkSWQpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2V0SW5wdXRWYWx1ZXMoY2FyZElkKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVDYXJkTGlrZUNsaWNrOiAoY2FyZElkLCBpc0xpa2VkKSA9PiB7XHJcbiAgICAgICAgaXNMaWtlZFxyXG4gICAgICAgICAgPyBhcGkuZGVsZXRlTGlrZShjYXJkSWQpLnRoZW4oKGRhdGEpID0+IGNhcmQudXBkYXRlTGlrZUNvdW50KGRhdGEpKVxyXG4gICAgICAgICAgOiBhcGkuYWRkTGlrZShjYXJkSWQpLnRoZW4oKGRhdGEpID0+IGNhcmQudXBkYXRlTGlrZUNvdW50KGRhdGEpKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vKipcclxuICogRW5hYmxlcyBmb3JtIHZhbGlkYXRpb24gZm9yIGFsbCBmb3JtcyBhbmQgbWFrZXMgaXQgYWNjZXNpYmxlIGJ5ICduYW1lJ1xyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gZm9ybVNldHRpbmdzXHJcbiAqL1xyXG5jb25zdCBlbmFibGVGb3JtVmFsaWRhdGlvbiA9IChmb3JtU2V0dGluZ3MpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMucG9wdXBGb3JtKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gICAgLy8gR2V0IHRoZSBuYW1lIG9mIHRoZSBmb3JtXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgLy8gU3RvcmUgdGhlIHZhbGlkYXRvciBieSB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXHJcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gQ3JlYXRlIGluc3RhbmNlcyBvZiBDbGFzc2VzXHJcbmNvbnN0IGFwaUhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XHJcbiAgYXV0aG9yaXphdGlvbjogXCJhMzk3Y2QzNy01ZmZkLTRjYzktYTgwZi05NTk5NTc4MTIzYzNcIixcclxuICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiBhcGlIZWFkZXJzLFxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oKTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkc0NvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucG9wdXBJbWFnZSk7XHJcblxyXG5jb25zdCBlZGl0QXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMuZWRpdEF2YXRhclBvcHVwLCB7XHJcbiAgc3VibWl0Rm9ybTogKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgZWRpdEF2YXRhclBvcHVwLmVuYWJsZUxvYWRpbmdTdGF0ZSgpO1xyXG5cclxuICAgIC8vIERlc3RydWN0dXJlIGFuZCByZWFzc2lnbiB2YWx1ZXMgb2JqZWN0XHJcbiAgICBjb25zdCBhdmF0YXIgPSBlZGl0QXZhdGFyUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmVkaXRVc2VyQXZhdGFyKGF2YXRhcilcclxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB1c2VyLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGVkaXRBdmF0YXJQb3B1cC5kaXNhYmxlTG9hZGluZ1N0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5lZGl0UHJvZmlsZVBvcHVwLCB7XHJcbiAgc3VibWl0Rm9ybTogKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgZWRpdFByb2ZpbGVQb3B1cC5lbmFibGVMb2FkaW5nU3RhdGUoKTtcclxuXHJcbiAgICAvLyBEZXN0cnVjdHVyZSBhbmQgcmVhc3NpZ24gdmFsdWVzIG9iamVjdFxyXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gZWRpdFByb2ZpbGVQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSlcclxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB1c2VyLnNldFVzZXJJbmZvKHVzZXJEYXRhKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBlZGl0UHJvZmlsZVBvcHVwLmRpc2FibGVMb2FkaW5nU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMuZGVsZXRlQ2FyZFBvcHVwLCB7XHJcbiAgc3VibWl0Rm9ybTogKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgLy9GaW5kIGFuZCBkZWxldGUgdGhlIGNhcmRcclxuICAgIGNvbnN0IHsgY2FyZElkIH0gPSBkZWxldGVDYXJkUG9wdXAuZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FyZElkKTtcclxuXHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbihjYXJkRWxlbWVudC5yZW1vdmUoKSlcclxuICAgICAgLmZpbmFsbHkoZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCkpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLmFkZENhcmRQb3B1cCwge1xyXG4gIHN1Ym1pdEZvcm06IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYWRkQ2FyZFBvcHVwLmVuYWJsZUxvYWRpbmdTdGF0ZSgpO1xyXG5cclxuICAgIC8vIERlc3RydWN0dXJlIGFuZCByZWFzc2lnbiB2YWx1ZXMgb2JqZWN0XHJcbiAgICBjb25zdCB7IG5hbWUsIGxpbmsgfSA9IGFkZENhcmRQb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xyXG5cclxuICAgIGFwaVxyXG4gICAgICAuYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSlcclxuICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmREYXRhKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGFkZENhcmRQb3B1cC5kaXNhYmxlTG9hZGluZ1N0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBjbGFzcyBpbnN0YW5jZXNcclxuYXBpLmdldEFwcEluZm8oKS50aGVuKChbdXNlckRhdGEsIGNhcmRzRGF0YV0pID0+IHtcclxuICB1c2VyLnJlbmRlclVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkc0RhdGEpO1xyXG59KTtcclxuXHJcbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gRW5hYmxlIEZvcm0gVmFsaWRhdGlvblxyXG5lbmFibGVGb3JtVmFsaWRhdGlvbihmb3JtU2V0dGluZ3MpO1xyXG5cclxuLy8gQnV0dG9uIENsaWNrIEV2ZW50IExpc3RlbmVyc1xyXG5lZGl0QXZhdGFyT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5hdmF0YXJGb3JtTmFtZV0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGZvcm1WYWxpZGF0b3JzW3NlbGVjdG9ycy5wcm9maWxlRm9ybU5hbWVdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGZpbGxQcm9maWxlRm9ybSgpO1xyXG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tzZWxlY3RvcnMuY2FyZEZvcm1OYW1lXS5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXJyb3IoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjYXVnaHQgaW4gZmV0Y2ggQVBJOiAke2Vycn1gKTtcclxuICB9XHJcblxyXG4gIF9nZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVTZXJ2ZXJSZXNwb25zZSlcclxuICAgICAgLmNhdGNoKHRoaXMuX2hhbmRsZUVycm9yKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBnZXRBcHBJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9nZXRVc2VySW5mbygpLCB0aGlzLl9nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG5cclxuICBlZGl0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhdmF0YXIpLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlU2VydmVyUmVzcG9uc2UpXHJcbiAgICAgIC5jYXRjaCh0aGlzLl9oYW5kbGVFcnJvcik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMudXNlck5hbWUpO1xyXG4gICAgdGhpcy5fdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMudXNlckFib3V0KTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy51c2VyQXZhdGFyKTtcclxuICAgIHRoaXMuX3VzZXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMudXNlckluZm8pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBuYW1lID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XHJcbiAgICBjb25zdCBhYm91dCA9IHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4geyBuYW1lLCBhYm91dCB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIHJlbmRlclVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB0aGlzLl91c2VySW5mby5pZCA9IF9pZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgY29uc3QgcmVuZGVyZWRJdGVtID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByZXBlbmQocmVuZGVyZWRJdGVtKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3N1YnRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJ0aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2VEYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBpbWFnZURhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGBJbWFnZSAke2ltYWdlRGF0YS5uYW1lfWA7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZS50ZXh0Q29udGVudCA9IGltYWdlRGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsic2VsZWN0b3JzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwidGVtcGxhdGVTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkSW1hZ2VDbGljayIsImhhbmRsZUNhcmREZWxldGVDbGljayIsImhhbmRsZUNhcmRMaWtlQ2xpY2siLCJ0aGlzIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9pZCIsIl91c2VySWQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsIl9vd25lcklkIiwib3duZXIiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkSW1hZ2VDbGljayIsIl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2siLCJfaGFuZGxlQ2FyZExpa2VDbGljayIsImNyZWF0ZUNhcmQiLCJfY2FyZCIsIl9nZXRFbGVtZW50IiwiX2NhcmROYW1lIiwiX2NhcmRJbWFnZSIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkTGlrZUNvdW50IiwiX2NhcmREZWxldGVCdXR0b24iLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9nZXRMaWtlQ291bnQiLCJfZmluZExpa2VTdGF0dXMiLCJfYXV0aGVudGljYXRlQ2FyZERlbGV0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaXNMaWtlZCIsIl9nZXRMaWtlZFVzZXJJZHMiLCJpbmNsdWRlcyIsIl90b2dnbGVDYXJkTGlrZUJ1dHRvbiIsIl9saXN0ZW5DYXJkTGlrZUJ1dHRvbkNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxlbmd0aCIsInRvU3RyaW5nIiwidXBkYXRlTGlrZUNvdW50IiwibWFwIiwibGlrZSIsIl9zaG93Q2FyZERlbGV0ZUJ1dHRvbiIsImFkZCIsIl9saXN0ZW5DYXJkRGVsZXRlQnV0dG9uQ2xpY2siLCJjYXJkSWQiLCJfbGlzdGVuQ2FyZEltYWdlQ2xpY2siLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9zZWxlY3RvciIsIl9lbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJzZWxlY3RvciIsInN1Ym1pdEZvcm0iLCJzdXBlciIsIl9zdWJtaXRGb3JtIiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbkluaXRpYWxUZXh0IiwicmVzZXQiLCJnZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImVuYWJsZUxvYWRpbmdTdGF0ZSIsImUiLCJSZWdFeHAiLCJyZXBsYWNlIiwiZGlzYWJsZUxvYWRpbmdTdGF0ZSIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImVkaXRBdmF0YXJPdmVybGF5IiwiZm9ybVZhbGlkYXRvcnMiLCJhcGlIZWFkZXJzIiwiSGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfaGFuZGxlU2VydmVyUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiX2hhbmRsZUVycm9yIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiX2dldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiY2F0Y2giLCJfZ2V0SW5pdGlhbENhcmRzIiwiZ2V0QXBwSW5mbyIsImFsbCIsImVkaXRVc2VySW5mbyIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGROZXdDYXJkIiwiZGVsZXRlQ2FyZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwiZWRpdFVzZXJBdmF0YXIiLCJhdmF0YXIiLCJ1c2VyIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dCIsIl91c2VyQXZhdGFyIiwiX3VzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJyZW5kZXJVc2VySW5mbyIsImNhcmRTZWN0aW9uIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwicmVuZGVyZWRJdGVtIiwicHJlcGVuZCIsImNhcmQiLCJpbWFnZURhdGEiLCJjYXJkUHJldmlld1BvcHVwIiwiZGVsZXRlQ2FyZFBvcHVwIiwiaXNMaWtlZCIsIl9pbWFnZSIsIl9zdWJ0aXRsZSIsImVkaXRBdmF0YXJQb3B1cCIsInByZXZlbnREZWZhdWx0IiwidXNlckRhdGEiLCJmaW5hbGx5IiwiZWRpdFByb2ZpbGVQb3B1cCIsImNhcmRFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRDYXJkUG9wdXAiLCJjYXJkRGF0YSIsImZvcm1TZXR0aW5ncyIsImNhcmRzRGF0YSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwidXNlckluZm8iLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9